import{C as f,g as S}from"./chordRenderer-BlKBfZfo.js";const C=document.querySelector("#chord1"),R=document.querySelector("#chord2"),q=document.querySelector("#new-chords"),a=document.querySelector("#play-timer"),l=document.querySelector("#pause-timer"),t=document.querySelector("#timer-display"),E=new f,T=new f;let n=null,r=300,i=null;const d=["C","A","G","E","D"],D=["major","minor","dom7","min7","maj7","power5"],M=5;function u(e){return e[Math.floor(Math.random()*e.length)]}function I(e){return Math.floor(Math.random()*(e+1))}function m(e){const o=e?d.filter(w=>w!==e):d,c=u(o),g=u(D),p=I(M);return S(c,g,p)}function h(){const e=m(),o=m(e.form);E.renderChord(C,e),T.renderChord(R,o)}function P(e){const o=Math.floor(e/60),c=e%60;return`${o}:${c.toString().padStart(2,"0")}`}function v(){t.textContent=P(r),r===0&&(s(),t.classList.add("finished"))}function k(e){e?(a.classList.add("hidden"),l.classList.remove("hidden")):(a.classList.remove("hidden"),l.classList.add("hidden"))}async function L(){try{"wakeLock"in navigator&&(i=await navigator.wakeLock.request("screen"),i.addEventListener("release",()=>{console.log("Wake lock released")}))}catch(e){console.error("Wake lock request failed:",e)}}async function W(){if(i!==null)try{await i.release(),i=null}catch(e){console.error("Wake lock release failed:",e)}}function b(){n===null&&(t.classList.remove("finished"),t.classList.add("running"),k(!0),L(),n=window.setInterval(()=>{r--,v(),r<=0&&s()},1e3))}function s(){n!==null&&(clearInterval(n),n=null),t.classList.remove("running"),k(!1),W()}function y(){s(),r=300,t.classList.remove("finished"),v()}q.addEventListener("click",()=>{n!==null&&y(),h()});a.addEventListener("click",()=>{r===0&&y(),b()});l.addEventListener("click",()=>{s()});document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&n!==null&&L()});h();
